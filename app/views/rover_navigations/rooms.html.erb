<div class="mt-3"></div>

<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><%= link_to "Zones", zones_rover_navigation_path %></li>
    <li class="breadcrumb-item"><%= link_to "Buildings", buildings_rover_navigation_path(zone_id: @floor.building.zone.id) %></li>
    <li class="breadcrumb-item active" aria-current="page">Rooms</li>
  </ol>
</nav>

<h2>Rooms for Building: <%= @floor.building.name %> (Floor <%= @floor.name %>) </h2>

<%= form_with url: rooms_rover_navigation_path, method: :get, local: true do |form| %>
  <%= form.hidden_field :floor_id, value: @floor.id %>
  <%= form.text_field :search, value: params[:search], placeholder: "Enter a room number", aria: { label: "search" } %>
  <%= form.submit "Search" %>
  <%= link_to 'Clear Filter', rooms_rover_navigation_path(floor_id: @floor.id), class: 'text-primary cancel-button' %>
<% end %>

<% @rooms.each do |room| %>
  <div class="card mt-3">
    <h5 class="card-header">
      Room: <%= room.room_number %>
    </h5>
    <div class="card-body">
      <p class="card-text">
        Room Record Number (Barcode): <%= room.rmrecnbr %>
      </p>
      <p class="card-text">
        Room Type: <%= room.room_type %>
      </p>
      <% if !room.room_state_for_today.nil? %>
        <p style="color:red">A room state has already been created today. You can now edit the room state.</p>
        <p style="color:red">Last Time Updated: <%= show_date_with_time(room.room_state_for_today.updated_at) %> </p>
        <%= link_to "Edit Today's Form", edit_room_room_state_path(room, room.room_state_for_today.id), class: "btn btn-primary" %>
      <% else %>
        <%= link_to "Start Checking Room", new_room_room_state_path(room), class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>
<% end %>